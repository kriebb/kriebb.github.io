<aside class="sidebar">
  {% for section in site.data.sidebar_structure %}
    <div class="sidebar-section">
      <h3>{{ site.data.i18n[site.active_lang].sidebar.sections[section.section] }}</h3>
      <ul>
        {% for item in section.items %}
          <li>
            {% comment %}
            /* Get the URL from routes data instead of direct mapping */
            {% endcomment %}
            {% assign item_url = site.data.routes.routes[item.id][site.active_lang] %}
            
            <a href="{{ item_url }}" {% if page.url == item_url %}class="active"{% endif %}>
              {{ site.data.i18n[site.active_lang].sidebar.links[item.id] }}
            </a>
          </li>
        {% endfor %}
      </ul>
    </div>
  {% endfor %}
  
  <!-- Table of contents (if enabled) -->
  {% if page.toc %}
    <div class="sidebar-section">
      <h3>{{ site.data.i18n[site.active_lang].sidebar.sections.on_this_page }}</h3>
      <ul id="toc">
        <!-- This will be populated by JavaScript -->
      </ul>
    </div>
  {% endif %}
</aside>