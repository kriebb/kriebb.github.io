{% assign current_lang = site.active_lang | default: site.default_lang %}
{% assign current_ref = page.ref %}

{% if current_ref %}
  {% if current_lang == 'en' %}
    {% assign alt_url = site.data.routes.routes[current_ref].nl %}
  {% else %}
    {% assign alt_url = site.data.routes.routes[current_ref].en %}
  {% endif %}
{% else %}
  {% if current_lang == 'en' %}
    {% assign alt_url = '/nl/' %}
  {% else %}
    {% assign alt_url = '/' %}
  {% endif %}
{% endif %}

<div class="language-switcher-container">
  <button class="language-trigger" aria-label="Change language">
    {% if current_lang == 'en' %}
      <span class="language-icon">ğŸ‡¬ğŸ‡§</span>
      <span class="language-name">English</span>
    {% else %}
      <span class="language-icon">ğŸ‡³ğŸ‡±</span>
      <span class="language-name">Nederlands</span>
    {% endif %}
  </button>
  
  <div class="language-dropdown">
    <a href="{{ alt_url }}" class="language-option" data-lang="{{ current_lang == 'en' ? 'nl' : 'en' }}">
      {% if current_lang == 'en' %}
        <span class="language-icon">ğŸ‡³ğŸ‡±</span>
        <span class="language-name">Nederlands</span>
      {% else %}
        <span class="language-icon">ğŸ‡¬ğŸ‡§</span>
        <span class="language-name">English</span>
      {% endif %}
    </a>
  </div>
</div>